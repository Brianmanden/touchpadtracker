<!DOCTYPE html>
<html>
<head>
	<title>mouse tracking</title>
	<style>	
		body{
			margin: 0;
			padding: 0;
			outline: 1px solid green;
		}
		#tracker{
			height: 100vh;
			width: 100%;
			outline: 3px solid red;		
		}
		
		#output{
			font-size: 30px;
			height: 200px;
			width: 200px;
		}
	</style>
</head>
<body>
	<div id="tracker">
		<textarea id="output"></textarea>
	</div>
	<script src="/socket.io/socket.io.js"></script>
	<script>
		<!-- var serverIP = "safe-depths-4979.herokuapp.com/"; -->
		<!-- var serverPort = "80"; -->
		
		var serverIP = location.hostname;
		var serverPort = location.port;

		var elem = document.getElementById('tracker');
		var output = document.getElementById('output');
		var socket = io.connect('http://' + serverIP + ':' + serverPort);

		elem.addEventListener('touchmove', function(e){
			pointerPosition = {
				/*x: e.touches[0].pageX,
				y: e.touches[0].pageY*/
				x: e.touches[0].screenX,
				y: e.touches[0].screenY
			};
			//output.value = pointerPosition.x + " - " + pointerPosition.y;
			output.value = e.touches[0];
			socket.emit('pointerPosition', { pointerPosition: pointerPosition } );
		}, false);

		// only for debugging
		/*
		elem.addEventListener('mousemove', function(eventData){
			pointerPosition = {
				x: eventData.pageX,
				y: eventData.pageY
			};
			output.value = pointerPosition.x + " - " + pointerPosition.y;
			socket.emit('pointerPosition', { pointerPosition: pointerPosition } );
		}, false);
		*/

	</script>
</body>
</html>
